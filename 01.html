<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì…ì†Œ ë° ì¤€ë¹„ ê³¼ì • | ê³µë¶€ì ê°€ì´ë“œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts Import -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Noto+Serif+KR:wght@500;600;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'k-bg': '#fdfbf7',
                        'k-text': '#1a1a1a',
                        'theme-color': '#d97706', // ì‚´êµ¬ìƒ‰ (Apricot)
                        'theme-soft': '#fff7ed',  // ì—°í•œ ì‚´êµ¬ìƒ‰ ë°°ê²½
                        'hanji-dot': '#e6e2d3',
                    },
                    fontFamily: {
                        serif: ['"Noto Serif KR"', 'serif'],
                        sans: ['"Noto Sans KR"', 'sans-serif'],
                    },
                    backgroundImage: {
                        'hanji-pattern': 'radial-gradient(#e6e2d3 1px, transparent 1px)',
                    },
                    boxShadow: {
                        'card': '0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03)',
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>

    <style>
        /* ê¸°ë³¸ ì„¤ì • */
        body {
            background-size: 24px 24px;
            word-break: keep-all;
        }

        /* ë¶€ë“œëŸ¬ìš´ ì „í™˜ íš¨ê³¼ */
        .transition-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ì‹œë®¬ë ˆì´í„° ë…¸ë“œ ì „í™˜ (ì• ë‹ˆë©”ì´ì…˜ í•µì‹¬) */
        .formation-node, .exit-node, .enter-node {
            transition: all 0.8s cubic-bezier(0.34, 1.1, 0.64, 1);
        }

        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #d6d3d1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a29e;
        }

        /* ë“œë¡­ë‹¤ìš´(Details) ì• ë‹ˆë©”ì´ì…˜ */
        details > summary {
            list-style: none;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }
        
        /* ì„¸ë¡œ ì“°ê¸° */
        .writing-vertical {
            writing-mode: vertical-rl;
            text-orientation: mixed;
        }
        
        /* ì‹œë®¬ë ˆì´í„° í™”ì‚´í‘œ ë¨¸ë¦¬ */
        .arrow-path::after {
            content: '';
            position: absolute;
            right: -6px; 
            bottom: -5px; 
            width: 0; 
            height: 0; 
            border-top: 6px solid transparent;
            border-bottom: 6px solid transparent;
            border-left: 10px solid #d97706; 
        }

        /* ì‹œë®¬ë ˆì´í„° ì‹œì‘ì  */
        .arrow-path::before {
            content: '';
            position: absolute;
            left: -4px;
            top: -4px;
            width: 8px;
            height: 8px;
            background-color: #d97706; 
            border-radius: 50%;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        /* ì•„ì½”ë””ì–¸ í¼ì¹¨ íš¨ê³¼ */
        details[open] summary ~ * {
            animation: slideDown 0.3s ease-out;
        }
        @keyframes slideDown {
            0% { opacity: 0; transform: translateY(-10px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        /* íƒ­ í™œì„±í™” ìŠ¤íƒ€ì¼ */
        .tab-btn.active {
            background-color: #d97706;
            color: white;
            font-weight: 700;
            border-color: #d97706;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
            animation: fadeIn 0.4s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="font-sans text-k-text antialiased text-lg bg-k-bg bg-hanji-pattern relative">

    <!-- í—¤ë” -->
    <header class="sticky top-0 z-50 w-full bg-white/95 border-b border-stone-200 shadow-sm h-20" id="main-header">
        <div class="max-w-4xl mx-auto px-6 h-full flex items-center justify-between">
            <div class="flex flex-col justify-center h-full pt-1">
                <div class="flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 text-theme-color">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9" />
                    </svg>
                    <h1 class="text-2xl font-serif font-bold tracking-tight text-k-text">ì…ì†Œ ë° ì¤€ë¹„ ê³¼ì •</h1>
                </div>
                <div class="w-full h-1 bg-theme-color mt-1 rounded-full opacity-80"></div>
            </div>

            <!-- í™ˆë²„íŠ¼ ìˆ˜ì •ë¨ -->
            <a href="index.html" class="flex items-center gap-2 px-4 py-2 bg-stone-50 hover:bg-stone-100 text-k-text font-bold rounded-full border border-stone-200 transition-colors shadow-sm group">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 text-stone-400 group-hover:text-theme-color transition-colors">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                </svg>
                <span class="font-serif text-sm">í™ˆìœ¼ë¡œ</span>
            </a>
        </div>
    </header>

    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <main class="max-w-4xl mx-auto mt-6 mb-16 px-4 md:px-6 py-8 bg-white/90 backdrop-blur-sm border border-stone-200 rounded-xl shadow-lg min-h-screen">

        <!-- ì¸íŠ¸ë¡œ ì„¹ì…˜ -->
        <section class="mb-10">
            <div class="bg-white p-6 md:p-8 border border-stone-100 rounded-xl shadow-card">
                <h2 class="text-3xl md:text-5xl font-serif font-bold text-k-text mb-4 leading-tight">
                    í™˜ì˜í•©ë‹ˆë‹¤.<br>
                    <span class="text-theme-color">ê³µë¶€ì˜ ì‹œì‘</span>ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.
                </h2>
                <p class="text-lg md:text-xl text-stone-600 leading-relaxed mb-6 font-medium">
                    ë³¸ë¶€ ë„ì°©ë¶€í„° <strong class="text-theme-color border-b-2 border-theme-color/30 px-1">'ë“œëŠ” ë´‰ì‹¬'</strong>ê¹Œì§€ì˜ ìˆœì„œì…ë‹ˆë‹¤.<br>
                    ì•„ë˜ ë‹¨ê³„(Step)ë¥¼ ìˆœì„œëŒ€ë¡œ ëˆŒëŸ¬ í™•ì¸í•´ ì£¼ì„¸ìš”.
                </p>

                <!-- ì¤€ë¹„ë¬¼ (ìš”ì•½) -->
                <div class="bg-theme-soft/50 p-4 rounded-lg border border-theme-color/10 flex items-start gap-4">
                    <span class="flex-shrink-0 w-12 h-12 flex items-center justify-center bg-white rounded-full text-theme-color border border-theme-color/20 shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                        </svg>
                    </span>
                    <div>
                        <strong class="block text-theme-color font-bold text-lg mb-1">í•„ìˆ˜ ì¤€ë¹„ë¬¼ ì±™ê¸°ì…¨ë‚˜ìš”?</strong>
                        <p class="text-stone-700 text-base">í•œë³µ, ì„¸ë©´ë„êµ¬, í°ì‹ ë°œ, ê°œì¸ ì»µ, ìƒë¹„ì•½</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ë‹¨ê³„ë³„ ì•„ì½”ë””ì–¸ ë¦¬ìŠ¤íŠ¸ -->
        <div id="steps-container" class="space-y-4">
            <!-- JSë¡œ ë‚´ìš© ì£¼ì…ë¨ -->
        </div>

    </main>

    <!-- ê³µí†µ í‘¸í„° -->
    <div class="text-center py-8 text-stone-400 text-sm font-medium">
        &copy; Gongbu Guide. All rights reserved.
    </div>

    <!-- í”Œë¡œíŒ… ë²„íŠ¼ (ìš°ì¸¡ í•˜ë‹¨ ê³ ì •) -->
    <div class="fixed bottom-8 right-8 z-50 flex flex-col gap-3">
        <!-- Top Scroll -->
        <button onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="p-3 bg-white border-2 border-stone-200 rounded-full shadow-lg text-theme-color hover:bg-theme-color hover:text-white hover:border-theme-color transition-all duration-300 group" aria-label="ë§¨ ìœ„ë¡œ">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7" />
            </svg>
        </button>
        <!-- Bottom Scroll -->
        <button onclick="window.scrollTo({top: document.body.scrollHeight, behavior: 'smooth'})" class="p-3 bg-white border-2 border-stone-200 rounded-full shadow-lg text-theme-color hover:bg-theme-color hover:text-white hover:border-theme-color transition-all duration-300 group" aria-label="ë§¨ ì•„ë˜ë¡œ">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
        </button>
    </div>

    <!-- JavaScript ë¡œì§ -->
    <script>
        const phases = [
            {
                id: 0,
                title: "ë„ì°© ë° ì¤€ë¹„",
                timeRange: "20:00 ~ 21:20",
                description: "ë³¸ë¶€ì— ë„ì°©í•˜ì—¬ í–‰ì • ì ˆì°¨ë¥¼ ë§ˆì¹˜ê³  ëª¸ê³¼ ë§ˆìŒì„ ì •ëˆí•˜ëŠ” ì‹œê°„ì…ë‹ˆë‹¤.",
                steps: [
                    { time: "20:00 ì´ì „", title: "ë³¸ë¶€ ë„ì°© ë° êµ­ê¶", desc: "ë„ì°© ì¦‰ì‹œ <strong>ëŒ€ê°•ì „ ì•ë§ˆë‹¹</strong>ì—ì„œ êµ­ê¶(ì¸ì‚¬)ì„ ë“œë¦½ë‹ˆë‹¤. ì´í›„ ì •ê¸‰ì‹¤ì—ì„œ ìˆ™ì†Œë¥¼ ë°°ì •ë°›ê³  íœ´ëŒ€í°ì„ ì œì¶œí•©ë‹ˆë‹¤. <span class='text-theme-color font-bold bg-theme-soft px-1 rounded'>ì•ŒëŒì„ ë„ê³  ì œì¶œí•´ ì£¼ì„¸ìš”.</span>" },
                    { time: "20:10", title: "í™˜ë³µ", desc: "ìˆ™ì†Œì— ì§ì„ í’€ê³  ì •ê°ˆí•œ í•œë³µìœ¼ë¡œ ê°ˆì•„ì…ìŠµë‹ˆë‹¤." },
                    { time: "20:30", title: "ê³µì§€ì‚¬í•­ ì²­ì·¨", desc: "ì‚¬ë¬´ì‹¤ì—ì„œ ì „ë‹¬í•˜ëŠ” ì¤‘ìš” ê³µì§€ì‚¬í•­ì„ ë“£ìŠµë‹ˆë‹¤." },
                    { time: "21:20 ì „", title: "í˜ˆì•• ì²´í¬", desc: "ì í˜¸ ì „ê¹Œì§€ <strong class='text-theme-color'>'ì²­í•™ê´€'</strong>ì—ì„œ ë°˜ë“œì‹œ í˜ˆì••ì„ ì¸¡ì •í•˜ê³  ê¸°ì¬ë¥¼ ì™„ë£Œí•©ë‹ˆë‹¤." }
                ]
            },
            {
                id: 1,
                title: "ì í˜¸",
                timeRange: "21:20 ~ 22:20",
                description: "ì¸ì› ì ê²€ì„ ë§ˆì¹˜ê³ , ì…ì†Œ ì˜ì‹ì¸ 'ë“œëŠ” ë´‰ì‹¬'ì„ ìœ„í•´ ê²½ê±´í•˜ê²Œ ì¤€ë¹„í•©ë‹ˆë‹¤.",
                steps: [
                    { time: "21:20 ê¹Œì§€", title: "ëŒ€ê¸° ì™„ë£Œ", desc: "ëŒ€ê°•ì „ 1ì¸µì— ë„ì°©í•˜ì—¬ ëŒ€ê¸°í•©ë‹ˆë‹¤. <strong>ì í˜¸ì‹œ ë‹¤ë‹¤ë¯¸ 2ì¹¸ì— 3ëª… ì‹œë¦½í•©ë‹ˆë‹¤.</strong><br><br><ul class='list-disc list-inside space-y-1 pl-1 text-stone-600'><li>íšŒì›ì€ ì‹œê°„í‘œì˜ ë²ˆí˜¸ í™•ì¸ í›„ ì •ë ¬</li><li>ì™¸ìˆ˜/ë‚´ìˆ˜ëŠ” ê³µë¶€ ì‹œê°„ì— ë§ê²Œ ì •ë ¬</li></ul>" },
                    { time: "21:30", title: "ì í˜¸ ì§„í–‰", desc: "ëŒ€ê°•ì „ 1ì¸µì—ì„œ ì „ì²´ ì í˜¸ë¥¼ ì‹¤ì‹œí•©ë‹ˆë‹¤.<br><span class='text-theme-color font-bold bg-theme-soft px-1 rounded inline-block my-2'>ì£¼ì˜: í˜¸ëª… ì‹œ ê³ ê°œë¥¼ ìˆ™ì´ì§€ ì•Šê³  ë°”ë¥¸ ìì„¸ë¡œ 'ë„¤'í•˜ê³  ë‹µí•©ë‹ˆë‹¤.</span><br><div class='bg-stone-50 p-4 rounded-lg border border-stone-200 mt-2'><strong class='block text-theme-color mb-2'>[ì§„í–‰ ìˆœì„œ]</strong><ol class='list-decimal list-inside space-y-1.5 text-stone-700 font-medium'><li><strong>í˜¸ëª…</strong></li><li><strong>í–¥ì „ë°°ë¡€</strong> (êµ¬ë ¹ì— ë§ì¶° ë°°ë¡€)</li><li><strong>ê³µì§€ì‚¬í•­ ì²­ì·¨</strong> (ì‹œí•™ì›ì˜ ì§€ì‹œì— ë”°ë¼)</li><li><strong>ì¢Œë°° í›„ ì¼ë™ í¥, êµ­ê¶, ì˜ˆí•„ í‡´</strong> ìˆœìœ¼ë¡œ ì§„í–‰</li></ol></div>" }
                ]
            },
            {
                id: 2,
                title: "ë“œëŠ” ë´‰ì‹¬",
                timeRange: "22:20 ~ ì¢…ë£Œ",
                description: "ê³µë¶€ì˜ ì‹œì‘ì„ ì•Œë¦¬ëŠ” ê°€ì¥ ì¤‘ìš”í•œ ì˜ì‹ì…ë‹ˆë‹¤. ë³µì¡í•œ ì´ë™ê³¼ ì˜ˆë²•ì´ ìˆìœ¼ë‹ˆ ì£¼ì˜ ê¹Šê²Œ í™•ì¸í•˜ì„¸ìš”.",
                isBongsim: true, // í”Œë˜ê·¸: ë´‰ì‹¬ ë‹¨ê³„ëŠ” íƒ­ UI ì‚¬ìš©
                tabs: [
                    { id: 'enter', label: '1. ì…ì¥' },
                    { id: 'bow', label: '2. ë´‰ì‹¬' },
                    { id: 'exit', label: '3. í‡´ì¥' }
                ],
                content: {
                    'enter': `
                        <div class="space-y-6">
                            <!-- ì¤‘ìš” ìˆ˜ì¹™ ê°•ì¡° ë°•ìŠ¤ (ì• ë‹ˆë©”ì´ì…˜ ì œê±°ë¨) -->
                            <div class="bg-red-50 border-l-4 border-red-500 p-5 rounded-r-lg shadow-sm">
                                <h4 class="flex items-center gap-2 text-red-700 font-bold text-lg mb-3">
                                    <span class="text-2xl">âš ï¸</span> [í•„ë…] ì…ì¥ ì‹œ ì ˆëŒ€ ìˆ˜ì¹™
                                </h4>
                                <ul class="space-y-2 text-red-800 font-medium">
                                    <li class="flex items-start gap-2">
                                        <span class="mt-1">ğŸ‘£</span>
                                        <span><strong>ì™¼ë°œ ë¨¼ì €:</strong> ë¬¸í„±ì„ ë„˜ì„ ë•ŒëŠ” ë°˜ë“œì‹œ ì™¼ë°œë¶€í„° ë„˜ìŠµë‹ˆë‹¤.</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="mt-1">ğŸ“</span>
                                        <span><strong>ì§ê° ë³´í–‰:</strong> ì´ë™ ì‹œ ê°ì„ ì§€ì¼œ ë³´í–‰í•©ë‹ˆë‹¤.</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="mt-1">ğŸ™</span>
                                        <span><strong>êµ­ê¶ ìœ ì§€:</strong> ì…ì¥ë¶€í„° 'ì •ë ¬ ì·¨ì„ ë©´ìˆ˜' êµ¬ë ¹ ì „ê¹Œì§€ êµ­ê¶ ìì„¸ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.</span>
                                    </li>
                                </ul>
                            </div>

                            <!-- ì ˆì°¨ ë¦¬ìŠ¤íŠ¸ -->
                            <div class="space-y-4">
                                <div class="bg-white p-5 rounded-xl border border-stone-200">
                                    <div class="flex items-center justify-between mb-2">
                                        <strong class="text-theme-color text-xl font-bold">1. ì‹œë¦½ ë° ëŒ€ê¸°</strong>
                                        <span class="text-sm font-medium text-stone-400">22:20 ê²½</span>
                                    </div>
                                    <p class="text-stone-700 mb-2"><strong>ì¥ì†Œ:</strong> ëŒ€ê°•ì „ 2ì¸µ ìŠ¹ì •ë¬¸ ì•</p>
                                    <p class="text-stone-700"><strong>ëŒ€í˜•:</strong> 3ì—´ ì¢…ëŒ€ (íšŒì› - ì™¸ìˆ˜ - ë‚´ìˆ˜ ìˆœ)</p>
                                </div>

                                <div class="bg-white p-5 rounded-xl border border-stone-200">
                                    <div class="flex items-center justify-between mb-2">
                                        <strong class="text-theme-color text-xl font-bold">2. 3ì¸µìœ¼ë¡œ ì´ë™</strong>
                                        <span class="text-sm font-medium text-stone-400">22:28 ê²½</span>
                                    </div>
                                    <p class="text-stone-700 mb-3">ì†Œì¢…ì´ ìš¸ë¦¬ë©´ ì‹œí•™ì›ì˜ êµ¬ë ¹ì— ë”°ë¼ ì´ë™í•©ë‹ˆë‹¤.</p>
                                    <div class="bg-stone-50 p-3 rounded-lg border border-stone-200 text-center">
                                        <span class="block text-sm text-stone-400 mb-1">ì‹œí•™ì› êµ¬ë ¹</span>
                                        <span class="font-serif font-bold text-lg text-theme-color">"ì •ë ¬ ë©´ìˆ˜" â†’ "1ì—´ ì•ìœ¼ë¡œ(íšŒì›)" â†’ "2ì—´ ì•ìœ¼ë¡œ(ì™¸ìˆ˜)"  â†’ "3ì—´ ì•ìœ¼ë¡œ(ë‚´ìˆ˜)"</span>
                                    </div>
                                </div>

                                <div class="bg-white p-5 rounded-xl border border-stone-200">
                                    <strong class="block text-theme-color text-xl font-bold mb-2">3. ëŒ€ë™ë¬¸ ì• ì •ë ¬</strong>
                                    <p class="text-stone-700 mb-1"><strong>ì¥ì†Œ:</strong> 3ì¸µ ëŒ€ê°•ì „ ëŒ€ë™ë¬¸ ì•</p>
                                    <p class="text-stone-700 mb-1"><strong>ëŒ€í˜•:</strong> 2ì¸µê³¼ ë™ì¼í•œ ìˆœì„œ(íšŒì›-ì™¸ìˆ˜-ë‚´ìˆ˜)</p>
                                    <p class="text-stone-700"><strong>ì‹œí•™ì›:</strong> ë§¨ ì• ì¤‘ì•™ì—ì„œ ëŒ€ë™ë¬¸ì„ ë“±ì§€ê³  ì „ì²´ë¥¼ ë°”ë¼ë´„</p>
                                </div>

                                <div class="bg-white p-5 rounded-xl border border-stone-200">
                                    <strong class="block text-theme-color text-xl font-bold mb-2">4. ì˜ëŒ€ ì…ì¥</strong>
                                    <div class="bg-stone-50 p-3 rounded-lg border border-stone-200 text-center mb-3">
                                        <span class="block text-sm text-stone-400 mb-1">ì‹œí•™ì› êµ¬ë ¹</span>
                                        <span class="font-serif font-bold text-lg text-theme-color">"êµ­ê¶ ~ 1ì—´ ì•ìœ¼ë¡œ ë‚˜ì†¨"</span>
                                    </div>
                                    <p class="text-stone-700 mb-2"><strong>í–‰ë™:</strong> ì „ì› êµ­ê¶ ìì„¸ ì·¨í•¨ â†’ íšŒì› ì¤„ë¶€í„° ëŒ€ë™ë¬¸ í†µê³¼ â†’ ì˜ëŒ€ ì§„ì…</p>
                                    <p class="text-stone-600 bg-theme-soft/50 p-2 rounded text-sm mb-4">ğŸ“ <strong>ìœ„ì¹˜:</strong> ì˜ëŒ€ ì• ë‹¤ë‹¤ë¯¸ 1ì¥ì— 2ëª…ì”© ì •ë ¬</p>
                                    
                                    <!-- ì‹ ë°œ ë°°ì¹˜ë„ ì‹œë®¬ë ˆì´í„° -->
                                    <div class="mt-4 border-t border-stone-100 pt-5">
                                        <h5 class="text-lg font-bold text-theme-color mb-3 flex items-center gap-2">
                                            <span>ğŸ‘ ì‹ ë°œ ë°°ì¹˜ë„</span>
                                        </h5>
                                        <div id="enter-simulation-placeholder"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `,
                    'bow': `
                        <div class="space-y-8">
                            <!-- 1. ì˜ëŒ€ ë°°ë¡€ -->
                            <div>
                                <h4 class="font-serif text-2xl font-bold text-k-text mb-4 flex items-center gap-2">
                                    <span class="w-8 h-8 rounded-full bg-theme-color text-white flex items-center justify-center text-sm">1</span>
                                    ì˜ëŒ€ ë°°ë¡€ (15ë°°)
                                </h4>
                                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm space-y-4">
                                    <p class="text-stone-600 mb-2">ì‹œí•™ì›ì˜ <strong class="text-theme-color">"ì¼ë™ ë°°ë¡€"</strong> êµ¬ë ¹ì— ë§ì¶¥ë‹ˆë‹¤.</p>
                                    
                                    <!-- ë°°ë¡€ ìŠ¤í… ì‹œê°í™” -->
                                    <div class="space-y-3">
                                        <div class="flex items-center gap-3 p-3 bg-stone-50 rounded-lg">
                                            <span class="font-bold text-stone-500 w-16">ê¸°ë³¸</span>
                                            <div class="flex-1 font-bold text-k-text">ë²•ë°° 4ë°° <span class="text-stone-400 text-sm font-normal">(ì œìë¦¬)</span></div>
                                        </div>
                                        <div class="flex items-center gap-3 p-3 bg-theme-soft/50 rounded-lg border border-theme-color/20">
                                            <span class="font-bold text-theme-color w-16">ğŸ‘£ â†’</span>
                                            <div class="flex-1">
                                                <div class="text-xs text-theme-color font-bold">ìš°ì§„ 1ë³´ (ì˜¤ë¥¸ìª½ 1ê±¸ìŒ)</div>
                                                <div class="font-bold text-k-text">ë²•ë°° 4ë°°</div>
                                            </div>
                                        </div>
                                        <div class="flex items-center gap-3 p-3 bg-blue-50 rounded-lg border border-blue-100">
                                            <span class="font-bold text-blue-600 w-16">â† ğŸ‘£</span>
                                            <div class="flex-1">
                                                <div class="text-xs text-blue-600 font-bold">ì¢Œì§„ 2ë³´ (ì™¼ìª½ 2ê±¸ìŒ)</div>
                                                <div class="font-bold text-k-text">í‰ë°° 3ë°°</div>
                                            </div>
                                        </div>
                                        <div class="flex items-center gap-3 p-3 bg-stone-50 rounded-lg">
                                            <span class="font-bold text-stone-500 w-16">ğŸ‘£ â†‘</span>
                                            <div class="flex-1">
                                                <div class="text-xs text-stone-500 font-bold">ê°±ì§„ 1ë³´ (ì™¼ìª½ 1ê±¸ìŒ)</div>
                                                <div class="font-bold text-k-text">í‰ë°° 2ë°°</div>
                                            </div>
                                        </div>
                                        <div class="flex items-center gap-3 p-3 bg-theme-soft/50 rounded-lg border border-theme-color/20">
                                            <span class="font-bold text-theme-color w-16">ğŸ‘£ â†’</span>
                                            <div class="flex-1">
                                                <div class="text-xs text-theme-color font-bold">ìš°ì§„ 4ë³´ (ì˜¤ë¥¸ìª½ 4ê±¸ìŒ)</div>
                                                <div class="font-bold text-k-text">í‰ë°° 2ë°°</div>
                                            </div>
                                        </div>
                                        <div class="flex items-center gap-3 p-3 bg-blue-50 rounded-lg border border-blue-100">
                                            <span class="font-bold text-blue-600 w-16">â† ğŸ‘£</span>
                                            <div class="flex-1">
                                                <div class="text-xs text-blue-600 font-bold">ì¢Œì§„ 2ë³´, í–¥ë‚¨ì, ë°”ë¡œ</div>
                                                <div class="font-bold text-k-text">ì™¼ìª½ ë‘ ê±¸ìŒ, ë‚¨ìª½ í–¥í•´ ìí•˜ê³  ë°”ë¡œ</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="text-center bg-stone-100 p-2 rounded text-stone-500 text-sm">
                                        êµ¬ë ¹: "êµ­ê¶ ì˜ˆí•„" (êµ­ê¶ ìì„¸ ìœ ì§€)
                                    </div>
                                </div>
                            </div>

                            <!-- 2. ëŒ€í˜• ì „í™˜ ì‹œë®¬ë ˆì´í„° -->
                            <div>
                                <h4 class="font-serif text-2xl font-bold text-k-text mb-4 flex items-center gap-2">
                                    <span class="w-8 h-8 rounded-full bg-theme-color text-white flex items-center justify-center text-sm">2</span>
                                    ëŒ€í˜• ì „í™˜ (3ì—´ â†’ 6ì—´)
                                </h4>
                                <div class="bg-white p-5 rounded-xl border border-stone-200 shadow-sm mb-4">
                                    <div class="mb-5 space-y-2 text-stone-700">
                                        <p class="mb-3">êµ¬ë ¹ <strong class="text-theme-color">"6ì—´ë¡œ ìš°í–¥ìš°"</strong>ì— ë§ì¶° ë‹¤ìŒê³¼ ê°™ì´ í–‰ë™í•©ë‹ˆë‹¤.</p>
                                        <ul class="list-disc list-inside space-y-1 pl-2 bg-stone-50 p-3 rounded-lg border border-stone-100">
                                            <li><strong>ëª¨ë“  ê³µë¶€ì</strong>ëŠ” ì˜¤ë¥¸ìª½(ë²•ë‹¨ ë°©í–¥)ìœ¼ë¡œ ì„­ë‹ˆë‹¤.</li>
                                            <li><strong>3ì—´ íš¡ëŒ€ â†’ 6ì—´ ì¢…ëŒ€</strong>ë¡œ ë³€ê²½ë©ë‹ˆë‹¤.</li>
                                            <li class="text-stone-500 text-sm mt-1 list-none pl-4">ğŸ’¡ (í™€ìˆ˜ ë²ˆí˜¸ëŠ” ì œìë¦¬ì—ì„œ ìš°í–¥ìš°, ì§ìˆ˜ ë²ˆí˜¸ëŠ” ì•ì‚¬ëŒ ìš°ì¸¡ìœ¼ë¡œ ì´ë™)</li>
                                        </ul>
                                    </div>
                                    <div id="simulation-placeholder"></div> <!-- ì‹œë®¬ë ˆì´í„° ì£¼ì… ìœ„ì¹˜ -->
                                </div>
                            </div>

                            <!-- 3. ë²•ë‹¨ ë°°ë¡€ -->
                            <div>
                                <h4 class="font-serif text-2xl font-bold text-k-text mb-4 flex items-center gap-2">
                                    <span class="w-8 h-8 rounded-full bg-theme-color text-white flex items-center justify-center text-sm">3</span>
                                    ë²•ë‹¨ ë°°ë¡€ (8ë°°)
                                </h4>
                                <div class="bg-white p-5 rounded-xl border border-stone-200 shadow-sm space-y-3">
                                    <div class="flex items-center gap-3 p-3 bg-stone-50 rounded-lg">
                                        <span class="font-bold text-stone-500 w-16">ê¸°ë³¸</span>
                                        <div class="flex-1 font-bold text-k-text">ë²•ë°° 4ë°° <span class="text-stone-400 text-sm">(êµ¬ì²œìƒì œë‹˜)</span></div>
                                    </div>
                                    <div class="flex items-center gap-3 p-3 bg-theme-soft/50 rounded-lg border border-theme-color/20">
                                        <span class="font-bold text-theme-color w-16">ğŸ‘£ â†’</span>
                                        <div class="flex-1">
                                            <div class="text-xs text-theme-color font-bold">ìš°ì§„ 1ë³´</div>
                                            <div class="font-bold text-k-text">ë²•ë°° 4ë°° <span class="text-stone-400 text-sm">(ë„ì£¼ë‹˜)</span></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 4. ì›ìœ„ì¹˜ -->
                            <div>
                                <h4 class="font-serif text-2xl font-bold text-k-text mb-4 flex items-center gap-2">
                                    <span class="w-8 h-8 rounded-full bg-theme-color text-white flex items-center justify-center text-sm">4</span>
                                    ì›ìœ„ì¹˜ ë³µê·€ (ì‹œë¦½)
                                </h4>
                                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm">
                                    <p class="text-stone-700 leading-relaxed mb-2">
                                        êµ¬ë ¹ <strong class="text-theme-color">"3ì—´ë¡œ ì¢Œí–¥ì¢Œ"</strong>ì— ë§ì¶° ì™¼ìª½(ì˜ëŒ€ ë°©í–¥)ìœ¼ë¡œ ë•ë‹ˆë‹¤.
                                    </p>
                                    <ul class="list-disc list-inside space-y-1 pl-1 text-stone-600">
                                        <li>6ì—´ ì¢…ëŒ€ì—ì„œ ë‹¤ì‹œ <strong>3ì—´ íš¡ëŒ€ (ì›ë˜ ìœ„ì¹˜)</strong>ë¡œ ë³µê·€í•©ë‹ˆë‹¤.</li>
                                        <li>ë©´ìˆ˜ ìì„¸ë¡œ ì˜ëŒ€ë¥¼ í–¥í•´ ì‹œë¦½í•©ë‹ˆë‹¤.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    `,
                    'exit': `
                        <div class="space-y-6">
                            <div class="bg-white p-5 rounded-xl border border-stone-200">
                                <strong class="block text-theme-color text-xl font-bold mb-3">1. í‡´ì¥ ëŒ€í˜• ê°–ì¶”ê¸°</strong>
                                <div class="bg-stone-50 p-3 rounded-lg border border-stone-200 mb-3 text-center">
                                    <span class="block text-sm text-stone-400 mb-1">ì‹œí•™ì› êµ¬ë ¹</span>
                                    <span class="font-serif font-bold text-lg text-theme-color">"êµ­ê¶ ì˜ˆí•„ í‡´"</span>
                                </div>
                                <ul class="space-y-2 text-stone-700">
                                    <li>1. <strong>ì „ì²´ ì¢Œí–¥ì¢Œ:</strong> <span class="text-red-600 font-bold">ì™¼ìª½ ë°©í–¥ìœ¼ë¡œ</span> ë’¤ë¡œ ë•ë‹ˆë‹¤.</li>
                                    <li>2. <strong>ì „ì§„ 3ë³´:</strong> ì•ìœ¼ë¡œ 3ë°œì§ ì´ë™í•˜ì—¬ ì¶œêµ¬ ë°©í–¥ê³¼ ì •ë ¬í•©ë‹ˆë‹¤.</li>
                                    <li>3. <strong>ëŒ€ì—´ ì •ë¹„:</strong> ì•ìª½ 5ëª…(8~12ë²ˆ)ì€ ë‹¤ì‹œ ì™¼ìª½ ë°©í–¥ìœ¼ë¡œ ë’¤ë¡œ ëŒì•„, 6-7ë²ˆ ë„ì¸ì€ ì¶œêµ¬ë¥¼ í–¥í•´ ì„­ë‹ˆë‹¤.</li>
                                </ul>
                            </div>

                            <div class="bg-white p-5 rounded-xl border border-stone-200">
                                <strong class="block text-theme-color text-xl font-bold mb-3">2. í‡´ì¥ ì‹œì‘</strong>
                                <p class="text-stone-700 mb-2">ê°€ì¥ ì•ˆìª½ ì¤„ì¸ <strong>ë‚´ìˆ˜(ì—¬ì„±)</strong> ì¤„ë¶€í„° í‡´ì¥í•©ë‹ˆë‹¤.</p>
                                <p class="text-stone-700 mb-3 bg-stone-50 p-2 rounded"><strong>ë°©ë²•:</strong> ì¤‘ì•™ì˜ 2ëª…(6ë²ˆ, 7ë²ˆ)ì„ ì„ ë‘ë¡œ <strong>2ëª…ì”© ì§ì„ ì§€ì–´</strong> ë‚˜ê°‘ë‹ˆë‹¤.</p>
                                <div class="flex items-center gap-2 text-sm font-bold text-stone-500 bg-stone-100 p-3 rounded-lg justify-center">
                                    <span class="text-red-600">ë‚´ìˆ˜ ì¤„</span>
                                    <span>â†’</span>
                                    <span class="text-blue-600">ì™¸ìˆ˜ ì¤„</span>
                                    <span>â†’</span>
                                    <span class="text-yellow-600">íšŒì› ì¤„</span>
                                </div>
                                <div class="mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 font-bold text-center">
                                    âš ï¸ ë¬¸í„±ì€ ë°˜ë“œì‹œ 'ì™¼ë°œ'ë¶€í„° ë„˜ìŠµë‹ˆë‹¤!
                                </div>
                            </div>
                            
                            <!-- í‡´ì¥ ì‹œë®¬ë ˆì´í„°ê°€ ì‚½ì…ë  ì˜ì—­ -->
                            <div class="mt-6 border-t border-stone-200 pt-6">
                                <h5 class="text-lg font-bold text-theme-color mb-3 flex items-center gap-2">
                                    <span>ğŸƒ í‡´ì¥ ìˆœì„œ ì‹œë®¬ë ˆì´í„°</span>
                                </h5>
                                <div id="exit-simulation-placeholder"></div>
                            </div>

                            <div class="bg-white p-5 rounded-xl border border-stone-200">
                                <strong class="block text-theme-color text-xl font-bold mb-3">3. ë‚˜ê°€ê¸°</strong>
                                <p class="text-stone-700">ì •ê¸‰(ë‹¹ë²ˆ)ì´ ì •ë¦¬í•´ ë‘” ì‹ ë°œì„ ì‹ ê³ , ì§€ì²´ ì—†ì´ ê³„ë‹¨ì„ ë‚´ë ¤ê°‘ë‹ˆë‹¤.</p>
                            </div>
                        </div>
                    `
                }
            }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            renderAllSteps();
        });

        function getPhaseTimeRange(index) {
            return phases[index].timeRange || "";
        }

        // ì „ì²´ ë‹¨ê³„ ë Œë”ë§
        function renderAllSteps() {
            const container = document.getElementById('steps-container');
            let html = '';

            phases.forEach((phase, index) => {
                const isOpen = index === 0 ? 'open' : '';
                
                html += `
                    <details class="phase-details group bg-white border border-stone-200 rounded-xl shadow-sm mb-4 overflow-hidden" ${isOpen}>
                        <summary class="phase-summary flex items-center justify-between p-5 md:p-6 cursor-pointer bg-white hover:bg-theme-soft/30 transition-colors list-none select-none border-l-4 border-transparent group-open:border-theme-color">
                            <div class="flex items-center gap-4 md:gap-5 flex-1">
                                <span class="flex-shrink-0 flex items-center justify-center w-12 h-12 rounded-full bg-stone-100 text-stone-500 font-bold font-serif text-xl group-open:bg-theme-color group-open:text-white transition-all shadow-sm border border-stone-200 group-open:border-theme-color">
                                    ${index + 1}
                                </span>
                                <div class="flex flex-col">
                                    <span class="text-xs font-bold text-stone-400 uppercase tracking-wider mb-0.5 group-open:text-theme-color">Step 0${index + 1}</span>
                                    <h3 class="text-xl md:text-2xl font-serif font-bold text-k-text group-open:text-theme-color transition-colors">${phase.title}</h3>
                                    <span class="md:hidden text-sm font-medium text-stone-400 mt-1">${getPhaseTimeRange(index)}</span>
                                </div>
                            </div>
                            
                            <div class="flex items-center gap-4">
                                <span class="hidden md:inline-block text-sm font-bold text-stone-500 bg-stone-100 px-3 py-1 rounded-full border border-stone-200 group-open:bg-theme-soft group-open:text-theme-color group-open:border-theme-color/20">
                                    ${getPhaseTimeRange(index)}
                                </span>
                                <span class="transform transition-transform duration-300 group-open:rotate-180 text-stone-400 group-open:text-theme-color">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                                    </svg>
                                </span>
                            </div>
                        </summary>
                        
                        <div class="border-t border-stone-100 bg-stone-50/50 p-5 md:p-8">
                            <p class="text-lg text-k-text font-medium mb-6 leading-relaxed bg-white p-4 rounded-lg border border-stone-200 shadow-sm">
                                ${phase.description}
                            </p>
                            
                            <!-- ë¶„ê¸° ì²˜ë¦¬: ì¼ë°˜ ìŠ¤í… vs ë´‰ì‹¬ íƒ­ -->
                            ${phase.isBongsim ? renderBongsimTabs(phase) : getPhaseContentHTML(phase)}
                        </div>
                    </details>
                `;
            });

            container.innerHTML = html;
            
            // ì‹œë®¬ë ˆì´í„° ì´ˆê¸°í™” (íƒ­ ì•ˆì— ì£¼ì…)
            attachTabEvents();
            
            // ì•„ì½”ë””ì–¸ ìƒí˜¸ì‘ìš©
            const phaseDetails = container.querySelectorAll('.phase-details');
            phaseDetails.forEach((targetDetail) => {
                targetDetail.addEventListener('click', (e) => {
                    const clickedSummary = e.target.closest('summary');
                    if (clickedSummary && clickedSummary.parentElement === targetDetail) {
                        phaseDetails.forEach((detail) => {
                            if (detail !== targetDetail) detail.removeAttribute('open');
                        });
                    }
                });
            });
        }

        // ì¼ë°˜ ë‹¨ê³„ ë‚´ìš© ìƒì„±
        function getPhaseContentHTML(phase) {
            let html = '<div class="space-y-4">';
            if (phase.steps && phase.steps.length > 0) {
                phase.steps.forEach(step => {
                    html += `
                        <div class="bg-white p-5 rounded-xl border border-stone-200 flex flex-col md:flex-row gap-4 md:items-start group hover:border-theme-color/50 transition-colors shadow-sm">
                            <div class="md:w-32 flex-shrink-0">
                                <span class="inline-block px-3 py-1 bg-theme-soft text-theme-color font-bold rounded-full text-sm border border-theme-color/20">
                                    ${step.time}
                                </span>
                            </div>
                            <div class="flex-grow">
                                <h4 class="font-serif text-xl font-bold text-k-text mb-2 group-hover:text-theme-color transition-colors">
                                    ${step.title}
                                </h4>
                                <p class="text-stone-600 text-lg leading-relaxed font-medium">${step.desc}</p>
                            </div>
                        </div>
                    `;
                });
            }
            html += '</div>';
            return html;
        }

        // ë´‰ì‹¬ ë‹¨ê³„ íƒ­ UI ìƒì„±
        function renderBongsimTabs(phase) {
            let tabsHtml = `<div class="bg-white rounded-xl border border-stone-200 overflow-hidden shadow-sm">`;
            
            // íƒ­ í—¤ë”
            tabsHtml += `<div class="flex border-b border-stone-200">`;
            phase.tabs.forEach((tab, idx) => {
                const isActive = idx === 0 ? 'active' : '';
                tabsHtml += `
                    <button class="tab-btn flex-1 py-4 text-center font-medium text-stone-500 hover:bg-stone-50 transition-colors border-b-2 border-transparent ${isActive}" data-tab="${tab.id}">
                        ${tab.label}
                    </button>
                `;
            });
            tabsHtml += `</div>`;

            // íƒ­ ë‚´ìš©
            tabsHtml += `<div class="p-5 md:p-8 bg-white min-h-[300px]">`;
            phase.tabs.forEach((tab, idx) => {
                const isActive = idx === 0 ? 'active' : '';
                tabsHtml += `
                    <div id="tab-${tab.id}" class="tab-content ${isActive}">
                        ${phase.content[tab.id]}
                    </div>
                `;
            });
            tabsHtml += `</div></div>`;
            return tabsHtml;
        }

        // ì‹œë®¬ë ˆì´í„° ìƒì„± í™•ì¸ìš© í”Œë˜ê·¸
        let isEnterSimInitialized = false;
        let isSimInitialized = false;
        let isExitSimInitialized = false;

        // íƒ­ ì´ë²¤íŠ¸ ë° ì‹œë®¬ë ˆì´í„° ì£¼ì…
        function attachTabEvents() {
            const buttons = document.querySelectorAll('.tab-btn');
            const contents = document.querySelectorAll('.tab-content');

            // 0. ì…ì¥ ì‹œë®¬ë ˆì´í„° ì£¼ì…
            const enterSimContainer = document.getElementById('enter-simulation-placeholder');
            if (enterSimContainer) {
                enterSimContainer.innerHTML = renderEnterSimulationUI();
                isEnterSimInitialized = false;
                setTimeout(() => updateEnterSim(), 100);
            }

            // 1. ëŒ€í˜• ì „í™˜ ì‹œë®¬ë ˆì´í„° ì£¼ì…
            const simContainer = document.getElementById('simulation-placeholder');
            if (simContainer) {
                simContainer.innerHTML = renderSimulationUI();
                isSimInitialized = false; 
                setTimeout(() => updateSim('initial'), 100);
            }

            // 2. í‡´ì¥ ì‹œë®¬ë ˆì´í„° ì£¼ì…
            const exitSimContainer = document.getElementById('exit-simulation-placeholder');
            if (exitSimContainer) {
                exitSimContainer.innerHTML = renderExitSimulationUI();
                isExitSimInitialized = false;
                setTimeout(() => updateExitSim('initial'), 100);
            }

            // 3. íƒ­ í´ë¦­ ì´ë²¤íŠ¸
            buttons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const targetId = btn.getAttribute('data-tab');

                    // ë²„íŠ¼ í™œì„±í™” ì²˜ë¦¬
                    buttons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    // ë‚´ìš© ì „í™˜
                    contents.forEach(c => c.classList.remove('active'));
                    document.getElementById(`tab-${targetId}`).classList.add('active');
                });
            });
        }

        /* -----------------------------------------------------------------
           0. ì…ì¥ ëŒ€ê¸° ì‹œë®¬ë ˆì´í„° ê´€ë ¨ ë¡œì§
           ----------------------------------------------------------------- */
        function renderEnterSimulationUI() {
            return `
                <div class="bg-white border border-stone-200 rounded-xl mx-auto w-full relative h-[350px] md:h-[400px] overflow-hidden shadow-inner" style="background-image: linear-gradient(#f5f5f4 1px, transparent 1px), linear-gradient(90deg, #f5f5f4 1px, transparent 1px); background-size: 40px 40px;">
                    
                    <!-- ê°€ë¡œë¡œ ê¸´ ì§ì‚¬ê°í˜• ë°œíŒ -->
                    <div class="absolute border-2 border-stone-300 bg-stone-50/50" style="top: 15%; left: 10%; width: 60%; height: 50%;"></div>
                    
                    <!-- ì…êµ¬ (ìœ—ë³€ ìœ„ìª½ ì¤‘ì•™) -->
                    <div class="absolute bg-stone-100 flex items-center justify-center border-x-2 border-t-2 border-stone-400 rounded-t-lg z-10" style="bottom: 85%; left: 40%; width: 12%; height: 8%; transform: translateX(-50%);">
                        <span class="text-stone-600 font-bold text-xs tracking-wider">ì…êµ¬</span>
                    </div>

                    <!-- ì•ˆë‚´ ë¼ë²¨ -->
                    <div class="absolute text-yellow-600 font-bold text-xs" style="top: 10%; left: 74%;">íšŒì› ì‹ ë°œ</div>
                    <div class="absolute text-blue-600 font-bold text-xs" style="top: calc(75% - 8px); left: 3%;">ì™¸ìˆ˜</div>
                    <div class="absolute text-red-600 font-bold text-xs" style="top: calc(86% - 8px); left: 3%;">ë‚´ìˆ˜</div>

                    <!-- ì• ë‹ˆë©”ì´ì…˜ ë…¸ë“œ ì˜ì—­ -->
                    <div id="enter-nodes-area" class="relative w-full h-full"></div>
                </div>
            `;
        }

        function initEnterSimNodes() {
            const area = document.getElementById('enter-nodes-area');
            if (!area) return;
            area.innerHTML = '';
            
            const roles = [
                { name: 'member', colorClass: 'bg-yellow-100 text-yellow-900 border border-yellow-400' },
                { name: 'oesu', colorClass: 'bg-blue-100 text-blue-900 border border-blue-400' },
                { name: 'naesu', colorClass: 'bg-red-100 text-red-900 border border-red-400' }
            ];

            for (let i = 1; i <= 12; i++) {
                roles.forEach((role) => {
                    const node = document.createElement('div');
                    node.id = `enter-node-${role.name}-${i}`;
                    node.className = `enter-node absolute w-6 h-6 md:w-8 md:h-8 rounded-full flex items-center justify-center text-xs md:text-sm font-bold shadow-md z-20 ${role.colorClass}`;
                    node.innerText = i;
                    area.appendChild(node);
                });
            }
            isEnterSimInitialized = true;
        }

        function updateEnterSim() {
            if (!isEnterSimInitialized) initEnterSimNodes();

            // 1. íšŒì› ì‹ ë°œ (ì˜¤ë¥¸ìª½ ë³€ ë°”ê¹¥, 2ì¤„)
            // ì™¼ìª½ ì¤„: ìœ„ì—ì„œ ì•„ë˜ë¡œ 1~6ë²ˆ
            // ì˜¤ë¥¸ìª½ ì¤„: ì•„ë˜ì—ì„œ ìœ„ë¡œ 7~12ë²ˆ
            for (let i = 1; i <= 12; i++) {
                let node = document.getElementById(`enter-node-member-${i}`);
                if (!node) continue;
                
                let col = i <= 6 ? 0 : 1; // 0: ì™¼ìª½ ì¤„, 1: ì˜¤ë¥¸ìª½ ì¤„
                let row = i <= 6 ? (i - 1) : (12 - i); // 0 ~ 5 (ìƒë‹¨ë¶€í„° 0ë²ˆì§¸)
                
                let left = 74 + col * 8; // X ì¢Œí‘œ: 74%, 82%
                let top = 15 + row * 10; // Y ì¢Œí‘œ: 15% ~ 65%

                node.style.left = `calc(${left}% - 12px)`;
                node.style.top = `calc(${top}% - 12px)`;
            }

            // 2. ì™¸ìˆ˜ ë° ë‚´ìˆ˜ ì‹ ë°œ (ì•„ë«ë³€ ë°”ê¹¥, ê°€ë¡œ ë°°ì—´)
            // ë°°ì—´ ìˆœì„œ: ì˜¤ë¥¸ìª½ë¶€í„° 11, 12, 1, 2, ..., 10
            const sequence = [11, 12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
            
            sequence.forEach((num, j) => {
                // ì™¸ìˆ˜ ì‹ ë°œ (ì§ì‚¬ê°í˜• ë°”ë¡œ ì•„ë˜)
                let nodeO = document.getElementById(`enter-node-oesu-${num}`);
                if (nodeO) {
                    let left = 68 - j * 5.2; // 68%ë¶€í„° ì™¼ìª½ìœ¼ë¡œ 5.2% ê°„ê²©
                    let top = 75; // ì•„ë«ë³€ ë°”ë¡œ ë°‘
                    nodeO.style.left = `calc(${left}% - 12px)`;
                    nodeO.style.top = `calc(${top}% - 12px)`;
                }

                // ë‚´ìˆ˜ ì‹ ë°œ (ì™¸ìˆ˜ ì•„ë˜)
                let nodeN = document.getElementById(`enter-node-naesu-${num}`);
                if (nodeN) {
                    let left = 68 - j * 5.2;
                    let top = 86; // ì™¸ìˆ˜ë³´ë‹¤ ì¡°ê¸ˆ ë” ì•„ë˜
                    nodeN.style.left = `calc(${left}% - 12px)`;
                    nodeN.style.top = `calc(${top}% - 12px)`;
                }
            });
        }


        /* -----------------------------------------------------------------
           1. ë´‰ì‹¬ ëŒ€í˜• ì „í™˜ ì‹œë®¬ë ˆì´í„° ê´€ë ¨ ë¡œì§
           ----------------------------------------------------------------- */
        // ì‹œë®¬ë ˆì´í„° ê¸°ë³¸ ê»ë°ê¸° UI
        function renderSimulationUI() {
            return `
                <div class="mt-2 border-t border-stone-200 pt-4">
                    <div class="flex gap-2 mb-4 justify-center">
                        <button onclick="updateSim('initial')" class="flex-1 px-4 py-3 bg-white text-k-text font-bold rounded-lg border border-stone-300 shadow-sm text-sm active:bg-stone-100 hover:bg-stone-50 transition-colors">ì´ˆê¸° ì •ë ¬ (3ì—´)</button>
                        <button onclick="updateSim('final')" class="flex-1 px-4 py-3 bg-theme-color text-white font-bold rounded-lg shadow-md text-sm active:bg-[#b45309] hover:bg-[#c26a05] transition-colors">6ì—´ ì „í™˜</button>
                    </div>

                    <div id="sim-container" class="bg-white border border-stone-200 rounded-xl mx-auto w-full relative h-[350px] overflow-hidden shadow-inner">
                        <div class="absolute inset-0 pointer-events-none opacity-10" style="background-image: linear-gradient(#1a1a1a 1px, transparent 1px), linear-gradient(90deg, #1a1a1a 1px, transparent 1px); background-size: 40px 40px;"></div>
                        
                        <div class="absolute right-0 top-0 h-full w-8 md:w-10 bg-stone-50 border-l border-stone-200 flex flex-col items-center justify-center z-20">
                            <span class="writing-vertical text-theme-color font-serif font-bold text-sm tracking-widest">ë²•ë‹¨</span>
                        </div>
                        <div class="absolute top-0 left-0 w-full h-8 md:h-10 bg-stone-50 border-b border-stone-200 flex items-center justify-center z-20">
                            <span class="text-theme-color font-serif font-bold text-sm tracking-widest pr-8 md:pr-10">ì˜ëŒ€</span>
                        </div>
                        
                        <!-- ì• ë‹ˆë©”ì´ì…˜ ìš”ì†Œë“¤ì´ ì˜¬ë¼ê°ˆ ë°”íƒ• -->
                        <div id="nodes-area" class="relative w-full h-full"></div>
                    </div>
                </div>
            `;
        }

        function initSimNodes() {
            const area = document.getElementById('nodes-area');
            if (!area) return;
            
            area.innerHTML = '';
            
            const roles = [
                { name: 'member', colorClass: 'bg-yellow-100 text-yellow-900 border border-yellow-400' },
                { name: 'oesu', colorClass: 'bg-blue-100 text-blue-900 border border-blue-400' },
                { name: 'naesu', colorClass: 'bg-red-100 text-red-900 border border-red-400' }
            ];

            const labelsRow1 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
            const labelsRow23 = [11, 12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

            roles.forEach((role, rIndex) => {
                const currentLabels = (rIndex === 0) ? labelsRow1 : labelsRow23;

                for (let i = 0; i < 12; i++) {
                    const num = currentLabels[i]; 

                    if (num % 2 === 0) {
                        const path = document.createElement('div');
                        path.id = `path-${role.name}-${num}`;
                        path.className = 'absolute z-0 arrow-path transition-opacity duration-700 opacity-0';
                        area.appendChild(path);
                    }

                    const node = document.createElement('div');
                    node.id = `node-${role.name}-${num}`;
                    node.className = `formation-node absolute w-6 h-6 md:w-8 md:h-8 rounded-full flex items-center justify-center text-xs md:text-sm font-bold shadow-md z-10 ${role.colorClass}`;
                    node.innerText = num;
                    if (num % 2 === 0) {
                        node.style.boxShadow = 'inset 0 0 0 2px rgba(255,255,255,0.7)'; 
                    }
                    area.appendChild(node);
                }
            });

            isSimInitialized = true;
        }

        function updateSim(state) {
            if (!isSimInitialized) initSimNodes();

            const roles = ['member', 'oesu', 'naesu'];
            const labelsRow1 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
            const labelsRow23 = [11, 12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

            const startLeft = 76; 
            const horizontalSpacing = 6.2; 

            roles.forEach((roleName, rIndex) => {
                const currentLabels = (rIndex === 0) ? labelsRow1 : labelsRow23;

                for (let i = 0; i < 12; i++) {
                    const colIndexFromRight = i; 
                    const num = currentLabels[i]; 
                    
                    let effectiveColIndex = colIndexFromRight;
                    if (state === 'final' && num % 2 === 0) {
                        effectiveColIndex = colIndexFromRight - 1; 
                    }
                    
                    let leftVal = (startLeft - (colIndexFromRight * horizontalSpacing)); 
                    let finalLeftVal = (startLeft - (effectiveColIndex * horizontalSpacing)); 
                    
                    let left = (state === 'final') ? finalLeftVal + '%' : leftVal + '%';
                    const rowBaseTop = 15 + (rIndex * 26); 
                    let top = rowBaseTop + '%';

                    const node = document.getElementById(`node-${roleName}-${num}`);
                    if (node) {
                        if (state === 'final') {
                            node.style.transform = 'rotate(90deg)'; 
                            if (num % 2 === 0) {
                                top = (rowBaseTop + 12) + '%';
                            }
                        } else {
                            node.style.transform = 'rotate(0deg)';
                        }
                        node.style.left = left;
                        node.style.top = top;
                    }

                    if (num % 2 === 0) {
                        const path = document.getElementById(`path-${roleName}-${num}`);
                        if (path) {
                            const offset = 2.5;
                            path.style.left = (leftVal + offset) + '%';
                            path.style.top = (rowBaseTop + offset) + '%';
                            path.style.width = ((finalLeftVal - leftVal)) + '%';
                            path.style.height = '12%'; 
                            path.style.borderLeft = '2px dotted #d97706'; 
                            path.style.borderBottom = '2px dotted #d97706';
                            path.style.borderBottomLeftRadius = '12px'; 

                            if (state === 'final') {
                                setTimeout(() => { path.style.opacity = '1'; }, 300);
                            } else {
                                path.style.opacity = '0';
                            }
                        }
                    }
                }
            });
        }

        /* -----------------------------------------------------------------
           2. í‡´ì¥ (3. í‡´ì¥) ì‹œë®¬ë ˆì´í„° ê´€ë ¨ ë¡œì§
           ----------------------------------------------------------------- */
        let exitTimeouts = [];

        function clearExitTimeouts() {
            exitTimeouts.forEach(clearTimeout);
            exitTimeouts = [];
        }

        function renderExitSimulationUI() {
            return `
                <div class="flex flex-wrap gap-2 mb-4 justify-center">
                    <button onclick="updateExitSim('initial')" class="px-3 py-2 bg-white text-k-text font-bold rounded-lg border border-stone-300 shadow-sm text-sm hover:bg-stone-50 transition-colors">1. ì´ˆê¸° ì •ë ¬</button>
                    <button onclick="updateExitSim('shift')" class="px-3 py-2 bg-stone-100 text-k-text font-bold rounded-lg border border-stone-300 shadow-sm text-sm hover:bg-stone-200 transition-colors">2. ì¢Œì¸¡ ì´ë™</button>
                    <button onclick="updateExitSim('exitNaesu')" class="px-3 py-2 bg-red-50 text-red-900 font-bold rounded-lg border border-red-300 shadow-sm text-sm hover:bg-red-100 transition-colors">3. ë‚´ìˆ˜ í‡´ì¥</button>
                    <button onclick="updateExitSim('exitOesu')" class="px-3 py-2 bg-blue-50 text-blue-900 font-bold rounded-lg border border-blue-300 shadow-sm text-sm hover:bg-blue-100 transition-colors">4. ì™¸ìˆ˜ í‡´ì¥</button>
                    <button onclick="updateExitSim('exitMember')" class="px-3 py-2 bg-yellow-50 text-yellow-900 font-bold rounded-lg border border-yellow-400 shadow-sm text-sm hover:bg-yellow-100 transition-colors">5. íšŒì› í‡´ì¥</button>
                </div>

                <div class="bg-white border border-stone-200 rounded-xl mx-auto w-full relative h-[420px] md:h-[450px] overflow-hidden shadow-inner" style="background-image: linear-gradient(#f5f5f4 1px, transparent 1px), linear-gradient(90deg, #f5f5f4 1px, transparent 1px); background-size: 40px 40px;">
                    
                    <!-- ì˜ëŒ€ (ìƒë‹¨) -->
                    <div class="absolute top-0 left-0 w-full h-8 md:h-10 bg-stone-50 border-b border-stone-200 flex items-center justify-center z-20">
                        <span class="text-theme-color font-serif font-bold text-sm tracking-widest pr-8 md:pr-10">ì˜ëŒ€</span>
                    </div>

                    <!-- ë²•ë‹¨ (ìš°ì¸¡) -->
                    <div class="absolute right-0 top-0 h-full w-8 md:w-10 bg-stone-50 border-l border-stone-200 flex flex-col items-center justify-center z-20">
                        <span class="writing-vertical text-theme-color font-serif font-bold text-sm tracking-widest">ë²•ë‹¨</span>
                    </div>

                    <!-- ì¶œêµ¬ (í•˜ë‹¨ ì¢Œì¸¡ ì¹˜ìš°ì¹¨) -->
                    <div class="absolute bottom-0 left-[34%] w-[12%] h-8 bg-[#e5e5e5] border-t-2 border-x-2 border-stone-300 rounded-t-lg flex items-center justify-center z-20 shadow-sm">
                        <span class="text-stone-600 font-bold text-xs tracking-wider">ì¶œêµ¬</span>
                    </div>
                    
                    <!-- ì• ë‹ˆë©”ì´ì…˜ ë…¸ë“œ ì˜ì—­ -->
                    <div id="exit-nodes-area" class="relative w-full h-full"></div>
                </div>
            `;
        }

        function initExitSimNodes() {
            const area = document.getElementById('exit-nodes-area');
            if (!area) return;
            area.innerHTML = '';
            
            const roles = [
                { name: 'member', colorClass: 'bg-yellow-100 text-yellow-900 border border-yellow-400' },
                { name: 'oesu', colorClass: 'bg-blue-100 text-blue-900 border border-blue-400' },
                { name: 'naesu', colorClass: 'bg-red-100 text-red-900 border border-red-400' }
            ];

            const labelsRow1 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]; // íšŒì› (ì˜¤ë¥¸ìª½ë¶€í„° 1~12)
            const labelsRow23 = [11, 12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]; // ì™¸ìˆ˜/ë‚´ìˆ˜ (ì˜¤ë¥¸ìª½ë¶€í„° 11,12,1~10)

            roles.forEach((role, rIndex) => {
                const currentLabels = (rIndex === 0) ? labelsRow1 : labelsRow23;
                for (let i = 0; i < 12; i++) {
                    const num = currentLabels[i];
                    const node = document.createElement('div');
                    node.id = `exit-node-${role.name}-${num}`;
                    // ì›í™œí•œ ì´ë™ì„ ìœ„í•´ transition í´ë˜ìŠ¤ ì¶”ê°€
                    node.className = `exit-node absolute w-6 h-6 md:w-8 md:h-8 rounded-full flex items-center justify-center text-xs md:text-sm font-bold shadow-md z-10 ${role.colorClass}`;
                    node.innerText = num;
                    area.appendChild(node);
                }
            });
            isExitSimInitialized = true;
        }

        function updateExitSim(state) {
            if (!isExitSimInitialized) initExitSimNodes();
            clearExitTimeouts(); // ìƒˆ ë²„íŠ¼ í´ë¦­ ì‹œ ê¸°ì¡´ ì• ë‹ˆë©”ì´ì…˜ ì´ˆê¸°í™”
            
            const roles = ['member', 'oesu', 'naesu'];
            const labelsRow1 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
            const labelsRow23 = [11, 12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
            
            const baseLeft = 85; 
            const spacing = 6.2; 
            const shiftOffset = 11; // ì¤‘ì•™ ìŒ(ì¸ë±ìŠ¤ 5,6)ì´ ë¬¸(40%)ì— ì˜¤ë„ë¡ ì¢Œì¸¡ ì´ë™ 
            const rowTops = [20, 45, 70]; // íšŒì›, ì™¸ìˆ˜, ë‚´ìˆ˜ Y ì¢Œí‘œ (ì˜ëŒ€ì—ì„œ ë¨¼ ìˆœ)
            
            const doorTop = 90; // ë¬¸ ìœ„ì¹˜ Y

            // 1. ëª¨ë“  ì‚¬ëŒ ìœ„ì¹˜ ë° ìƒíƒœ ì´ˆê¸° ì„¤ì •
            roles.forEach((roleName, rIndex) => {
                const currentLabels = (rIndex === 0) ? labelsRow1 : labelsRow23;
                
                let isExited = false;
                if (state === 'exitOesu' && roleName === 'naesu') isExited = true;
                if (state === 'exitMember' && (roleName === 'naesu' || roleName === 'oesu')) isExited = true;

                for (let i = 0; i < 12; i++) {
                    const num = currentLabels[i];
                    const node = document.getElementById(`exit-node-${roleName}-${num}`);
                    if (!node) continue;
                    
                    node.style.transition = 'all 0.8s cubic-bezier(0.34, 1.1, 0.64, 1)';
                    
                    let left = baseLeft - (i * spacing);
                    if (state === 'shift' || state.startsWith('exit')) {
                        left -= shiftOffset;
                    }

                    if (isExited) {
                        // ì´ë¯¸ í‡´ì¥í•œ ì¤„ì€ ì¦‰ì‹œ ì‚¬ë¼ì§€ê²Œ ì²˜ë¦¬
                        node.style.transition = 'none';
                        node.style.opacity = '0';
                        node.style.transform = 'scale(0.5)';
                        node.style.top = `${doorTop}%`;
                        void node.offsetWidth; // Force Reflow
                        node.style.transition = 'all 0.8s cubic-bezier(0.34, 1.1, 0.64, 1)';
                    } else {
                        // ëŒ€ê¸° ë˜ëŠ” ì „ì²´ ì¢Œì¸¡ ì´ë™ ì„¸íŒ…
                        node.style.left = `${left}%`;
                        node.style.top = `${rowTops[rIndex]}%`;
                        node.style.opacity = '1';
                        node.style.transform = 'scale(1)';
                    }
                }
            });

            // 2. ì„ íƒëœ ì¤„ì˜ ìˆœì°¨ì  í‡´ì¥ + ë³´ì¶© ì‹œí€€ìŠ¤ ì‹œì‘
            if (state.startsWith('exit')) {
                let roleIndex = state === 'exitMember' ? 0 : (state === 'exitOesu' ? 1 : 2);
                let roleName = roles[roleIndex];
                const currentLabels = (roleIndex === 0) ? labelsRow1 : labelsRow23;
                
                // í‡´ì¥í•˜ëŠ” ì§ì˜ ì¸ë±ìŠ¤ ë°°ì—´ (ì¤‘ì•™ì—ì„œ ì–‘ ëìœ¼ë¡œ)
                const pairs = [[6, 5], [7, 4], [8, 3], [9, 2], [10, 1], [11, 0]];
                
                // ì¢Œì¸¡ ì´ë™(shift)ì´ ë¨¼ì € ëë‚˜ë„ë¡ 800ms ëŒ€ê¸° í›„ ì‹œí€€ìŠ¤ ì‹œì‘
                const seqDelay = 800; 

                pairs.forEach((pair, step) => {
                    // â‘  ì¤‘ì•™ ì§ ì•„ë˜ë¡œ ìˆ˜ì§ ì´ë™ (ì§ê° í•˜ê°•)
                    let t1 = setTimeout(() => {
                        const leftNode = document.getElementById(`exit-node-${roleName}-${currentLabels[pair[0]]}`);
                        const rightNode = document.getElementById(`exit-node-${roleName}-${currentLabels[pair[1]]}`);
                        
                        // leftê°’ì€ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ê³  topë§Œ ë°”ê¾¸ì–´ ì™„ë²½í•œ ìˆ˜ì§(ì§ê°) ì›€ì§ì„ êµ¬í˜„
                        if (leftNode) leftNode.style.top = `${doorTop}%`;
                        if (rightNode) rightNode.style.top = `${doorTop}%`;
                    }, seqDelay + step * 2000);
                    
                    // â‘¡ ë¬¸ ë„ì°© ì¦ˆìŒ í˜ì´ë“œì•„ì›ƒ ì²˜ë¦¬
                    let t2 = setTimeout(() => {
                        const leftNode = document.getElementById(`exit-node-${roleName}-${currentLabels[pair[0]]}`);
                        const rightNode = document.getElementById(`exit-node-${roleName}-${currentLabels[pair[1]]}`);
                        
                        if (leftNode) { leftNode.style.opacity = '0'; leftNode.style.transform = 'scale(0.5)'; }
                        if (rightNode) { rightNode.style.opacity = '0'; rightNode.style.transform = 'scale(0.5)'; }
                    }, seqDelay + step * 2000 + 700);
                    
                    // â‘¢ ë‚¨ì•„ ìˆëŠ” ë„ì¸ë“¤ ì¤‘ì•™ ë¹ˆìë¦¬ë¡œ ìˆ˜í‰ ì´ë™ (ìˆ˜ì§ ì´ë™ ëë‚œ ë’¤ ì‹œì‘í•˜ì—¬ ì§ê° í˜•íƒœ ë³´ì¥)
                    let t3 = setTimeout(() => {
                        // ì™¼ìª½ ë‚¨ì€ ì‚¬ëŒë“¤ (ìš°ì¸¡ìœ¼ë¡œ 1ì¹¸ ìˆ˜í‰ ì´ë™)
                        for (let i = pair[0] + 1; i <= 11; i++) {
                            const node = document.getElementById(`exit-node-${roleName}-${currentLabels[i]}`);
                            if (node) {
                                let currentLeft = baseLeft - i * spacing - shiftOffset + (step * spacing);
                                node.style.left = `${currentLeft + spacing}%`;
                            }
                        }
                        // ì˜¤ë¥¸ìª½ ë‚¨ì€ ì‚¬ëŒë“¤ (ì¢Œì¸¡ìœ¼ë¡œ 1ì¹¸ ìˆ˜í‰ ì´ë™)
                        for (let i = pair[1] - 1; i >= 0; i--) {
                            const node = document.getElementById(`exit-node-${roleName}-${currentLabels[i]}`);
                            if (node) {
                                let currentLeft = baseLeft - i * spacing - shiftOffset - (step * spacing);
                                node.style.left = `${currentLeft - spacing}%`;
                            }
                        }
                    }, seqDelay + step * 2000 + 1000);

                    exitTimeouts.push(t1, t2, t3);
                });
            }
        }
    </script>
<!-- ê²€ìƒ‰ì–´ í˜•ê´‘íœ ë° ìë™ ìŠ¤í¬ë¡¤ ê¸°ëŠ¥ (ìˆ˜ì •ë¨) -->
<script>
document.addEventListener("DOMContentLoaded", function() {
    const params = new URLSearchParams(window.location.search);
    const keyword = params.get('search');
    
    if (keyword) {
        // ë³¸ë¬¸ì´ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ìƒì„±ë  ì‹œê°„ì„ ë²Œì–´ì£¼ê¸° ìœ„í•´ 0.5ì´ˆ ëŒ€ê¸°í•©ë‹ˆë‹¤.
        setTimeout(() => {
            const walk = document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT, null, false);
            let node;
            const textNodes = [];
            while (node = walk.nextNode()) {
                if (node.parentNode.nodeName !== 'SCRIPT' && node.parentNode.nodeName !== 'STYLE') {
                    textNodes.push(node);
                }
            }
            
            let found = false;
            textNodes.forEach(textNode => {
                if (textNode.nodeValue.includes(keyword)) {
                    const span = document.createElement('span');
                    const regex = new RegExp(`(${keyword})`, 'gi');
                    span.innerHTML = textNode.nodeValue.replace(regex, '<mark class="search-highlight" style="background-color: #fef08a; color: #1a1a1a; padding: 0 2px; border-radius: 2px; font-weight: bold;">$1</mark>');
                    textNode.parentNode.replaceChild(span, textNode);
                    found = true;
                }
            });

            if (found) {
                setTimeout(() => {
                    const firstMark = document.querySelector('mark.search-highlight');
                    if (firstMark) {
                        // 1. ìˆ¨ê²¨ì§„ ì•„ì½”ë””ì–¸(ë¦¬ìŠ¤íŠ¸) ì•ˆì— ìˆë‹¤ë©´ ìë™ìœ¼ë¡œ ì—´ì–´ì£¼ê¸°
                        const detailsParent = firstMark.closest('details');
                        if (detailsParent) {
                            detailsParent.setAttribute('open', '');
                        }
                        
                        // 2. ìˆ¨ê²¨ì§„ íƒ­ ì•ˆì— ìˆë‹¤ë©´ í•´ë‹¹ íƒ­ í´ë¦­í•´ì„œ ì—´ì–´ì£¼ê¸°
                        const tabParent = firstMark.closest('.tab-content');
                        if (tabParent) {
                            const tabId = tabParent.id.replace('tab-', '');
                            const tabBtn = document.querySelector(`.tab-btn[data-tab="${tabId}"]`);
                            if (tabBtn) tabBtn.click();
                        }

                        // 3. í•´ë‹¹ ìœ„ì¹˜ë¡œ ë¶€ë“œëŸ½ê²Œ ìŠ¤í¬ë¡¤
                        firstMark.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }, 100);
            }
        }, 500); // 0.5ì´ˆ(500ms) ëŒ€ê¸° í›„ ì‹¤í–‰
    }
});
</script>
</body>
</html>
